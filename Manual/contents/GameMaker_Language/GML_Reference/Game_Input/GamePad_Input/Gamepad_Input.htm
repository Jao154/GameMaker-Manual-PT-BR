<?xml version="1.0" encoding="utf-8" ?>
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>Entrada Gamepad</title>
  <meta name="generator" content="Adobe RoboHelp 2020" />
  <link rel="stylesheet" href="../../../../assets/css/default.css" type="text/css" />
  <script src="../../../../assets/scripts/main_script.js"></script>
  <meta name="rh-authors" content="Mark Alexander" />
  <meta name="topic-comment" content="Reference section for Gamepad Input" />
  <meta name="rh-index-keywords" content="gp_face1,gp_face2,gp_face3,gp_face4,gp_shoulderl,gp_shoulderlb,gp_shoulderr,gp_shoulderrb,gp_select,gp_start,gp_stickl,gp_stickr,gp_padu,gp_padd,gp_padl,gp_padr,gp_axislh,gp_axislv,gp_axisrh,gp_axisrv,gp_axis_acceleration_x,gp_axis_acceleration_y,gp_axis_acceleration_z,gp_axis_angular_velocity_x,gp_axis_angular_velocity_y,gp_axis_angular_velocity_z,gp_axis_orientation_x,gp_axis_orientation_y,gp_axis_orientation_z,gp_axis_orientation_w" />
  <meta name="search-keywords" content="Gamepad Input,gamepads,gp_face1,gp_face2,gp_face3,gp_face4,gp_shoulderl,gp_shoulderlb,gp_shoulderr,gp_shoulderrb,gp_select,gp_start,gp_stickl,gp_stickr,gp_padu,gp_padd,gp_padl,gp_padr,gp_axislh,gp_axislv,gp_axisrh,gp_axisrv,gp_axis_acceleration_x,gp_axis_acceleration_y,gp_axis_acceleration_z,gp_axis_angular_velocity_x,gp_axis_angular_velocity_y,gp_axis_angular_velocity_z,gp_axis_orientation_x,gp_axis_orientation_y,gp_axis_orientation_z,gp_axis_orientation_w" />
</head>
<body>
  <!--<div class="body-scroll" style="top: 150px;">-->
  <h1>Entrada Gamepad</h1>
  <p><b></b><span data-keyref="GameMaker Name">O GameMaker</span> tem uma série de funções dedicadas que podem ser usadas para detectar controles analógicos e digitais a partir de múltiplos gamepads conectados. Estas funções funcionam de forma similar às <a href="../Device_Input/Device_Input.htm">Entradas do Dispositivo</a>, na medida em que é possível detectar até quatro campos de jogo XInput diferentes que estão conectados (e até 8 campos de jogo DirectInput) e lidar com a entrada de cada um usando as mesmas funções. Observe que quando um campo de jogo é conectado ao seu dispositivo (ou é removido), então um <a href="../../../../The_Asset_Editors/Object_Properties/Async_Events.htm">Evento de Sistema</a> assíncrono é acionado onde você pode lidar com a situação usando as funções apropriadas.</p>
  <p>Os &quot;slots&quot; do gamepad são indexados de 0 para cima, e o slot real que um gamepad designado dependerá de uma variedade de fatores, entre os quais não menos importante é o sistema operacional em que o projeto está sendo executado. No alvo do <strong>Windows</strong>, os slots 0 - 3 inclusive são <i>apenas para os controles do Xinput</i>, ou seja: controladores Xbox360 e compatíveis. Entretanto, você também pode verificar os slots 4 - 11 inclusive para os controles de jogo <i>DirectInput</i>, o que significa que você pode detectar muitos outros modelos de controladores quando conectado através destes slots. Em outras plataformas, os tapetes podem ser detectados em <em>qualquer</em> slot que o sistema operacional lhe tenha atribuído, que pode ser o slot 3 ou o slot 20 ou mais. Por exemplo, os dispositivos <strong>Android</strong> armazenarão os gamepads bluetooth em um slot e então reservarão esse slot para esse gamepad no futuro, seja ele conectado ou não, então você <em>não pode</em> assumir que um único gamepad conectado esteja conectado ao slot 0, pois este provavelmente não será o caso.</p>
  <p>Vale notar que ao utilizar os gamepads DirectInput em <span class="notranslate">Windows</span>, ou gamepads genéricos em outras plataformas, as constantes dadas abaixo <strong>podem não corresponder exatamente aos botões que você espera quando são pressionados</strong>, devido à forma fragmentada e não padronizada que a API é implementada pelos fabricantes de controladores. Devido a isto, é recomendável que você tenha algum tipo de tela de configuração do gamepad em seus jogos onde as pessoas possam redefinir os botões do gamepad com base na entrada de qualquer dispositivo conectado para mitigar quaisquer problemas (há funções de &quot;mapeamento&quot; do gamepad que podem ajudar com isto em <span class="notranslate">Windows</span> Desktop, <span class="notranslate">Ubuntu</span>, <span class="notranslate">macOS</span>, e <span class="notranslate">Android</span> alvos, enquanto em todos os outros você mesmo precisaria fazer isto usando código).</p>
  <h2>Constantes de entrada</h2>
  <p>Ao trabalhar com as funções do gamepad, a entrada pode vir de <strong>eixos</strong>, <strong>botões</strong> ou <strong>chapéus</strong>, que <span data-keyref="GameMaker Name">o GameMaker</span> atribuirá às seguintes constantes embutidas (note que &quot;chapéus&quot; geralmente são detectados apenas em controladores não padrão):</p>
  <table>
    <tbody>
      <tr>
        <th colspan="2"><span data-keyref="Type_Constant_Gamepad_Button"><a data-rhwidget="HyperlinkPopover" href="../../../../../GameMaker_Language/GML_Reference/Game_Input/GamePad_Input/gamepad_axis_value.htm">Botão Gamepad Constant</a></span></th>
      </tr>
      <tr>
        <th>Constante</th>
        <th>Descrição</th>
      </tr>
      <tr>
        <td><span class="notranslate"><span class="inline">gp_face1</span></td>
        <td>Botão de cima 1 (este mapa para o <i>&quot;A&quot;</i> em um controlador Xbox 360 e a <i>cruz</i> em um controlador PS)</td>
      </tr>
      <tr>
        <td><span class="notranslate"><span class="inline">gp_face2</span></td>
        <td>Botão de cima 2 (este mapa para o <i>&quot;B</i> &quot; em um controlador Xbox 360 e o <i>círculo</i> em um controlador PS)</td>
      </tr>
      <tr>
        <td><span class="notranslate"><span class="inline">gp_face3</span></td>
        <td>Botão de cima 3 (este mapa para o <i>&quot;X</i> &quot; em um controlador Xbox 360 e o <i>quadrado</i> em um controlador PS)</td>
      </tr>
      <tr>
        <td><span class="notranslate"><span class="inline">gp_face4</span></td>
        <td>Botão superior 4 (este mapa mostra o <i>&quot;Y&quot;</i> em um controlador Xbox 360 e o <i>triângulo</i> em um controlador PS)</td>
      </tr>
      <tr>
        <td><span class="notranslate"><span class="inline">gp_shoulderl</span></td>
        <td>Botão de ombro esquerdo</td>
      </tr>
      <tr>
        <td><span class="notranslate"><span class="inline">gp_shoulderlb</span></td>
        <td>Gatilho do ombro esquerdo</td>
      </tr>
      <tr>
        <td><span class="notranslate"><span class="inline">gp_shoulderr</span></td>
        <td>Botão de ombro direito</td>
      </tr>
      <tr>
        <td><span class="notranslate"><span class="inline">gp_shoulderrb</span></td>
        <td>Gatilho de ombro direito</td>
      </tr>
      <tr>
        <td><span class="notranslate"><span class="inline">gp_select</span></td>
        <td>O botão select (em um controlador DS4, isto aciona quando você pressiona o touchpad para baixo)</td>
      </tr>
      <tr>
        <td><span class="notranslate"><span class="inline">gp_start</span></td>
        <td>O botão start (este é o botão &quot;opções&quot; em um controlador PS4)</td>
      </tr>
      <tr>
        <td><span class="notranslate"><span class="inline">gp_stickl</span></td>
        <td>O bastão esquerdo pressionado (como um botão)</td>
      </tr>
      <tr>
        <td><span class="notranslate"><span class="inline">gp_stickr</span></td>
        <td>O bastão direito pressionado (como um botão)</td>
      </tr>
      <tr>
        <td><span class="notranslate"><span class="inline">gp_padu</span></td>
        <td>D-pad up</td>
      </tr>
      <tr>
        <td><span class="notranslate"><span class="inline">gp_padd</span></td>
        <td>D-pad down</td>
      </tr>
      <tr>
        <td><span class="notranslate"><span class="inline">gp_padl</span></td>
        <td>D-pad esquerda</td>
      </tr>
      <tr>
        <td><span class="notranslate"><span class="inline">gp_padr</span></td>
        <td>Direito D-pad</td>
      </tr>
    </tbody>
  </table>
  <table>
    <colgroup>
      <col />
      <col />
    </colgroup>
    <tbody>
      <tr>
        <th colspan="2"><span data-keyref="Type_Constant_Gamepad_Axis"><a data-rhwidget="HyperlinkPopover" href="../../../../../GameMaker_Language/GML_Reference/Game_Input/GamePad_Input/gamepad_axis_value.htm">Eixo Gamepad Constant</a></span></th>
      </tr>
      <tr>
        <th>Constante</th>
        <th>Descrição</th>
      </tr>
      <tr>
        <td><span class="notranslate"><span class="inline">gp_axislh</span></td>
        <td>Vara esquerda eixo horizontal (analógico)</td>
      </tr>
      <tr>
        <td><span class="notranslate"><span class="inline">gp_axislv</span></td>
        <td>Eixo vertical esquerdo da vara (analógico)</td>
      </tr>
      <tr>
        <td><span class="notranslate"><span class="inline">gp_axisrh</span></td>
        <td>Eixo horizontal do bastão direito (analógico)</td>
      </tr>
      <tr>
        <td><span class="notranslate"><span class="inline">gp_axisrv</span></td>
        <td>Eixo vertical do bastão direito (analógico)</td>
      </tr>
      <tr>
        <th colspan="2">As constantes abaixo só podem ser usadas com o gamepad DualSense em um PS4 ou PS5</th>
      </tr>
      <tr>
        <td><span class="notranslate"><span class="inline">gp_axis_acceleration_x</span>*</td>
        <td>A aceleração do gamepad no eixo X</td>
      </tr>
      <tr>
        <td><span class="notranslate"><span class="inline">gp_axis_acceleration_y</span>*</td>
        <td>A aceleração do gamepad no eixo Y</td>
      </tr>
      <tr>
        <td><span class="notranslate"><span class="inline">gp_axis_acceleration_z</span>*</td>
        <td>A aceleração do gamepad no eixo Z</td>
      </tr>
      <tr>
        <td><span class="notranslate"><span class="inline">gp_axis_angular_velocity_x</span>*</td>
        <td>A velocidade angular do gamepad no eixo X</td>
      </tr>
      <tr>
        <td><span class="notranslate"><span class="inline">gp_axis_angular_velocity_y</span>*</td>
        <td>A velocidade angular do gamepad no eixo Y</td>
      </tr>
      <tr>
        <td><span class="notranslate"><span class="inline">gp_axis_angular_velocity_z</span>*</td>
        <td>A velocidade angular do gamepad no eixo Z</td>
      </tr>
      <tr>
        <td><span class="notranslate"><span class="inline">gp_axis_orientation_x</span>*</td>
        <td>A orientação X do gamepad</td>
      </tr>
      <tr>
        <td><span class="notranslate"><span class="inline">gp_axis_orientation_y</span>*</td>
        <td>A orientação em Y do gamepad</td>
      </tr>
      <tr>
        <td><span class="notranslate"><span class="inline">gp_axis_orientation_z</span>*</td>
        <td>A orientação Z do gamepad</td>
      </tr>
      <tr>
        <td><span class="notranslate"><span class="inline">gp_axis_orientation_w</span>*</td>
        <td>A orientação W do gamepad</td>
      </tr>
    </tbody>
  </table>
  <p class="note"><span class="note">OBSERVAÇÃO</span> A <strong>orientação</strong> do gamepad é um <a href="https://en.wikipedia.org/wiki/Quaternion" title="Quaternion">Quaternion</a>, razão pela qual ele tem quatro valores (X, Y, Z e W).<br>
    <br>
    * Estas constantes só são suportadas em PS4 e PS5, e quando usadas em outras plataformas as funções de entrada retornarão <span class="inline">0</span>, mesmo quando se usa um gamepad DualSense.
  </p>
  <p>Para entender melhor exatamente que parte do controlador cada constante representa, você pode consultar a seguinte imagem de um gamepad padrão XInput:</p>
  <p><img alt="Xinput gamepad illustration" class="center" src="../../../../assets/Images/Scripting_Reference/GML/Reference/Game_Input/GamePad.png" /></p>
  <h2>Funções</h2>
  <p>Abaixo você pode encontrar uma lista de todas as funções do gamepad:</p>
  <ul class="colour">
    <li><a href="gamepad_is_supported.htm"><span class="notranslate">gamepad_is_supported</span></a></li>
    <li><a href="gamepad_is_connected.htm"><span class="notranslate">gamepad_is_connected</span></a></li>
    <li><a href="gamepad_get_guid.htm"><span class="notranslate">gamepad_get_guid</span></a></li>
    <li><a href="gamepad_get_device_count.htm"><span class="notranslate">gamepad_get_device_count</span></a></li>
    <li><a href="gamepad_get_description.htm"><span class="notranslate">gamepad_get_description</span></a></li>
    <li><a href="gamepad_get_button_threshold.htm"><span class="notranslate">gamepad_get_button_threshold</span></a></li>
    <li><a href="gamepad_get_axis_deadzone.htm"><span class="notranslate">gamepad_get_axis_deadzone</span></a></li>
    <li><a href="gamepad_get_option.htm"><span class="notranslate">gamepad_get_option</span></a></li>
    <li><a href="gamepad_set_button_threshold.htm"><span class="notranslate">gamepad_set_button_threshold</span></a></li>
    <li><a href="gamepad_set_axis_deadzone.htm"><span class="notranslate">gamepad_set_axis_deadzone</span></a></li>
    <li><a href="gamepad_set_vibration.htm"><span class="notranslate">gamepad_set_vibration</span></a></li>
    <li><a href="gamepad_set_colour.htm"><span class="notranslate">gamepad_set_colour</span></a></li>
    <li><a href="gamepad_set_option.htm"><span class="notranslate">gamepad_set_option</span></a></li>
    <li><a href="gamepad_axis_count.htm"><span class="notranslate">gamepad_axis_count</span></a></li>
    <li><a href="gamepad_axis_value.htm"><span class="notranslate">gamepad_axis_value</span></a></li>
    <li><a href="gamepad_button_check.htm"><span class="notranslate">gamepad_button_check</span></a></li>
    <li><a href="gamepad_button_check_pressed.htm"><span class="notranslate">gamepad_button_check_pressed</span></a></li>
    <li><a href="gamepad_button_check_released.htm"><span class="notranslate">gamepad_button_check_released</span></a></li>
    <li><a href="gamepad_button_count.htm"><span class="notranslate">gamepad_button_count</span></a></li>
    <li><a href="gamepad_button_value.htm"><span class="notranslate">gamepad_button_value</span></a></li>
    <li><a href="gamepad_hat_count.htm"><span class="notranslate">gamepad_hat_count</span></a></li>
    <li><a href="gamepad_hat_value.htm"><span class="notranslate">gamepad_hat_value</span></a></li>
  </ul>
  <p> </p>
  <p>As seguintes funções do gamepad também existem e são usadas para refazer as constantes construídas para as entradas físicas diretas de um determinado gamepad. Estas funções são apenas para as plataformas alvo <span class="notranslate">Windows</span> Desktop, <span class="notranslate">Ubuntu</span>, <span class="notranslate">macOS</span>, e <span class="notranslate">Android</span> e em <span class="notranslate">Windows</span>, elas serão válidas apenas para dispositivos de entrada direta. Enquanto o <span data-keyref="GameMaker Name">GameMaker</span> vem com mapeamentos para uma série de diferentes gamepads baseados no <a href="https://github.com/gabomdq/SDL_GameControllerDB" target="_blank">SDL Gamepad Controller DB</a>, no entanto, devido ao enorme número de tipos e marcas de controladores por aí, é impossível mapear as constantes <span class="notranslate">GML</span> para as entradas corretas para cada marca e modelo, portanto, com estas funções você tem a possibilidade de criar seus próprios mapeamentos personalizados.</p>
  <ul class="colour">
    <li><a href="gamepad_get_mapping.htm"><span class="notranslate">gamepad_get_mapping</span></a></li>
    <li><a href="gamepad_test_mapping.htm"><span class="notranslate">gamepad_test_mapping</span></a></li>
    <li><a href="gamepad_remove_mapping.htm"><span class="notranslate">gamepad_remove_mapping</span></a></li>
  </ul>
  <p> </p>
  <p>Vale notar que os controles de jogo Direct Input são executados em <i>modo cooperativo</i>, o que significa que seu jogo só tem acesso a eles quando é a aplicação em primeiro plano, o que, por sua vez, fará com que os controladores Direct Input sejam &quot;perdidos&quot; se o jogo perder o foco e depois &quot;encontrados&quot; novamente quando voltar ao foco (isto pode ser detectado no Evento de Sistema e tratado). Da mesma forma, nenhuma entrada dos controles de gamepads será detectada enquanto o jogo não estiver em foco, e recomendamos que você use a função <a href="../../OS_And_Compiler/os_is_paused.htm"><span class="inline">os_is_paused()</span></a> ou <a href="../../Cameras_And_Display/The_Game_Window/window_has_focus.htm"><span class="inline">window_has_focus()</span></a> para detectar isso e pausar o jogo ou algo semelhante, pois qualquer botão que esteja sendo mantido pressionado no momento em que o jogo perder o foco manterá o estado de retenção até que o jogo recupere o foco.</p>
  <h2>Compatibilidade</h2>
  <p>A lista a seguir mostra a compatibilidade atual entre as plataformas (note que isto mudará com futuras atualizações):</p>
  <ul class="colour">
    <li><strong>Windows </strong>é totalmente suportado com até um máximo de 12 dispositivos conectados permitidos de uma só vez (numerados de 0 a 11, sendo 0 - 3 dispositivos XInput e 4 - 11 dispositivos DirectInput). A remoção das constantes do controlador também é permitida.</li>
    <li><strong>macOS </strong>é suportado com até um máximo de 4 dispositivos conectados permitidos de uma vez, e estes dispositivos podem ser do tipo Playstation3 ou Xbox 360. Observe que a opção &quot;Build for Mac AppStore&quot; em Opções de Jogos Mac precisa estar DESLIGADA para que o suporte a pad funcione. A remoção das constantes do controlador também é permitida.</li>
    <li><strong>O Ubuntu </strong>também suporta a entrada do Gamepad, mas você pode precisar instalar bibliotecas adicionais a partir do repositório <span class="notranslate">Ubuntu</span>. Você pode fazer isto facilmente abrindo um terminal de linha de comando e digitando o seguinte (isto instalará suporte GUI para o joystick/gamepad assim como o próprio joystick/gamepad API - <i>não</i> é permitido refazer constantes de controladores):
     <p class="code">sudo apt-get install jstest-gtk<br />
        sudo apt-get install joystick.</p>
    </li>
    <li>Os jogos<strong>HTML5 </strong>que utilizam gamepads são suportados pela maioria dos principais navegadores, exceto o <i>Safari</i>. A remoção de constantes de controladores <i>não</i> é permitida.</li>
    <li>Os navegadores da Web só detectarão os controles de jogo quando um botão for pressionado ou um eixo for movido, de modo que eles podem não estar disponíveis no início imediato do jogo. Isto se aplica às plataformas de destino <strong>Opera GX</strong> e <strong>HTML </strong>.</li>
    <li>O suporte Gamepad também se estende ao <strong>iOS </strong>com o gabinete iCade. O eixo esquerdo mapeia para o controlador do bastão (embora a entrada seja digital, não analógica), os quatro botões &quot;face&quot; mapeiam para os botões dianteiros do gabinete, e os quatro botões de ombro mapeiam para aqueles na parte de trás do gabinete.</li>
    <li>A exportação do<strong>Android </strong>(e <strong>Amazon Fire</strong>) suporta controladores NYKO e controladores genéricos Bluetooth, mas somente quando estiverem habilitados, o que significa que você terá que marcar a opção iCade/Bluetooth na seção <a href="../../../../Settings/Game_Options/Android.htm">Geral</a> do <span class="notranslate">Android</span> Opções de Jogo. Eles requerem API nível 12 para que funcionem plenamente e deve ser notado que <span data-keyref="GameMaker Name">o GameMaker</span> registrará como conectado qualquer dispositivo Bluetooth com o qual seu dispositivo esteja emparelhado, esteja ou não conectado de fato. Portanto, isto deve ser levado em consideração ao atribuir e verificar os &quot;slots&quot;. Note que o remapeamento das constantes do controlador também é permitido.</li>
    <li>No <strong>PS4</strong>, se você quiser usar o rastreamento por toque, você precisa usar o <a href="../Device_Input/Device_Input.htm"><span class="inline">device_mouse_*</span></a> botões. A remoção das constantes do controlador <i>não</i> é permitida.</li>
    <li>No <strong>Windows </strong><strong>UWP</strong>, <strong>XBoxOne </strong>e <strong>Nintendo Switch</strong> alvos, os controles de jogo são totalmente suportados, mas o remapeamento das constantes do controlador <i>não</i> é permitido.</li>
  </ul>
  <p>Idealmente, em <i>todas as</i> plataformas alvo, você deseja enumerar uma lista de &quot;slots&quot; de gamepad disponíveis e então verificá-los para ver se algum dispositivo é detectado, algo como isto:</p>
  <p class="code">var _maxpads = gamepad_get_device_count();<br />
    <br />
    for (var i = 0; i &lt; _maxpads; i++)<br />
    {<br />
        if (gamepad_is_connected(i))<br />
        {<br />
            // do stuff with pad &quot;i&quot;<br />
        }<br />
    }
  </p>
  <p> </p>
  <p> </p>
  <div class="footer">
    <div class="buttons">
      <div class="clear">
        <div style="float:left">Voltar: <a href="../Game_Input.htm">Entrada de jogo</a></div>
        <div style="float:right">A seguir: <a href="../Virtual_Keys_And_Keyboards/Virtual_Keys_And_Keyboards.htm">Chaves e Teclados Virtuais</a></div>
      </div>
    </div>
    <h5><span data-keyref="Copyright Notice">© Copyright <span class="notranslate">YoYo Games Ltd.</span> 2022 Todos os direitos reservados</span></h5>
  </div>
  <!-- KEYWORDS
Gamepad Input Functions
gp_face1
gp_face2
gp_face3
gp_face4
gp_shoulderl
gp_shoulderlb
gp_shoulderr
gp_shoulderrb
gp_select
gp_start
gp_stickl
gp_stickr
gp_padu
gp_padd
gp_padl
gp_padr
gp_axislh
gp_axislv
gp_axisrh
gp_axisrv
gp_axis_acceleration_x
gp_axis_acceleration_y
gp_axis_acceleration_z
gp_axis_angular_velocity_x
gp_axis_angular_velocity_y
gp_axis_angular_velocity_z
gp_axis_orientation_x
gp_axis_orientation_y
gp_axis_orientation_z
gp_axis_orientation_w
-->
  <!-- TAGS
gamepad_functions
-->
</body>
</html>